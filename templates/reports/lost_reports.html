{% extends "users/base.html" %}

{% block content %}
<style>
  * {
    font-family: 'Inter', sans-serif;
  }

  body {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    background-size: 200% 200%;
    animation: gradientShift 15s ease infinite;
    position: relative;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: 
      radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.3) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(240, 147, 251, 0.3) 0%, transparent 50%),
      radial-gradient(circle at 40% 20%, rgba(118, 75, 162, 0.2) 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
  }

  @keyframes gradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  .content-wrapper {
    position: relative;
    z-index: 1;
  }

  .registration-container {
    animation: fadeInUp 0.6s ease-out;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .glass-card {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(25px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
  }

  .message-alert {
    animation: slideIn 0.5s ease-out;
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .floating-icon {
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  .input-field {
    background: rgba(255, 255, 255, 0.1) !important;
    border: 2px solid rgba(255, 255, 255, 0.3) !important;
    transition: all 0.3s ease;
    color: white !important;
  }

  .input-field::placeholder {
    color: rgba(255, 255, 255, 0.6);
  }

  .input-field:focus {
    background: rgba(246, 242, 242, 0.15) !important;
    color: black !important;
    border-color: rgba(255, 255, 255, 0.6) !important;
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3) !important;
    outline: none;
  }

  .label-text {
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.95);
  }

  .form-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  @media (min-width: 768px) {
    .form-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .form-full {
      grid-column: 1 / -1;
    }
  }

  .file-upload-area {
    background: rgba(255, 255, 255, 0.1);
    border: 2px dashed rgba(255, 255, 255, 0.3);
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .file-upload-area:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.02);
  }

  .submit-btn {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }

  .submit-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s;
  }

  .submit-btn:hover::before {
    left: 100%;
  }

  .submit-btn:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  }

  @media (max-width: 640px) {
    .glass-card {
      padding: 1.5rem;
    }
  }
</style>

<div class="min-h-screen py-8 sm:py-12 flex items-center justify-center px-4 content-wrapper">
  <div class="max-w-4xl w-full glass-card p-6 sm:p-10 rounded-3xl registration-container">
    
    <!-- Messages Section -->
    {% include 'messages/messages.html' %}
      

    <!-- Header -->
    <div class="text-center mb-8">
      <div class="flex items-center justify-center mb-4">
        <div class="logo-badge" style="width: 70px; height: 70px; font-size: 2.5rem;">
          üîç
        </div>
        </div>
      <h2 class="text-3xl sm:text-4xl font-extrabold text-white mb-2">
        Report Lost Item
      </h2>
      <p class="text-white/80 text-sm sm:text-base">Help reunite items with their rightful owners</p>
    </div>

    <!-- Form -->
    <form method="POST" enctype="multipart/form-data" action="{% url 'reports:lost_reports' %}" class="form-grid">
      {% csrf_token %}

      <!-- Item Name -->
      <div>
        <label class="block label-text mb-2 flex items-center gap-2">
          <svg class="w-5 h-5 text-green-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
          </svg>
          Item Name *
        </label>
        <input 
          type="text" 
          name="item_name" 
          placeholder="e.g., Blue Backpack" 
          required
          class="input-field w-full px-5 py-3.5 rounded-xl placeholder-white/60 focus:ring-0 focus:outline-none font-medium">
      </div>

      <!-- Category -->
      <div>
        <label class="block label-text mb-2 flex items-center gap-2">
          <svg class="w-5 h-5 text-purple-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"/>
          </svg>
          Category
        </label>
        <select 
          name="category" 
          class="input-field bg-cyan-50/20 w-full px-5 py-3.5 rounded-xl focus:ring-0 focus:outline-none font-medium">
          <option value="">Select Category</option>
          <option value="electronics">Electronics</option>
          <option value="accessories">Accessories</option>
          <option value="documents">Documents</option>
          <option value="clothing">Clothing</option>
          <option value="other">Other</option>
        </select>
      </div>

      <!-- Item Description -->
      <div class="form-full">
        <label class="block label-text mb-2 flex items-center gap-2">
          <svg class="w-5 h-5 text-emerald-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
          </svg>
          Item Description *
        </label>
        <textarea 
          name="item_description" 
          required
          rows="4"
          placeholder="Provide detailed description of the lost item..."
          class="input-field w-full px-5 py-3.5 rounded-xl placeholder-white/60 focus:ring-0 focus:outline-none font-medium resize-none"
        ></textarea>
      </div>

      <!-- Date Found -->
      <div>
        <label class="block label-text mb-2 flex items-center gap-2">
          <svg class="w-5 h-5 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
          </svg>
          Lost Date *
        </label>
        <input 
          type="date" 
          name="date_lost" 
          required
          class="input-field w-full px-5 py-3.5 rounded-xl focus:ring-0 focus:outline-none font-medium">
      </div>

      <!-- Location Found -->
      <div>
        <label class="block label-text mb-2 flex items-center gap-2">
          <svg class="w-5 h-5 text-yellow-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>
          Lost Location*
        </label>
        <input 
          type="text" 
          name="location" 
          required
          placeholder="e.g., City Library, 2nd Floor"
          class="input-field w-full px-5 py-3.5 rounded-xl placeholder-white/60 focus:ring-0 focus:outline-none font-medium">
      </div>

      <!-- Contact Information -->
      <div class="form-full">
        <label class="block label-text mb-2 flex items-center gap-2">
          <svg class="w-5 h-5 text-pink-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
          </svg>
          Contact Information *
        </label>
        <input 
          type="text" 
          name="contact" 
          required
          placeholder="Email or Phone Number"
          class="input-field w-full px-5 py-3.5 rounded-xl placeholder-white/60 focus:ring-0 focus:outline-none font-medium">
      </div>

      <!-- Upload Image -->
      <div class="form-full">
        <label class="block label-text mb-2 flex items-center gap-2">
          <svg class="w-5 h-5 text-cyan-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
          </svg>
          Upload Image (Optional)
        </label>
        <div class="file-upload-area rounded-xl p-8 text-center" onclick="document.getElementById('fileInput').click()">
          <svg class="w-12 h-12 text-white/60 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
          </svg>
          <p class="text-white/80 font-medium mb-1">Click to upload or drag and drop</p>
          <p class="text-white/60 text-sm">PNG, JPG, GIF up to 10MB</p>
          <input type="file" name="item_image" accept="image/*" class="hidden" id="fileInput">
        </div>
      </div>

      <!-- Submit Button -->
      <div class="form-full pt-4">
        <button 
          type="submit" 
          class="submit-btn w-full bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white font-bold py-4 rounded-xl shadow-xl relative overflow-hidden border-2 border-white/30">
          <span class="relative z-10 flex items-center justify-center gap-2 text-lg">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            Submit Lost Item Report
          </span>
        </button>
      </div>
    </form>

    <!-- Additional Info -->
    <div class="mt-8 pt-6 border-t border-white/20 text-center">
      <p class="text-white/60 text-xs sm:text-sm flex items-center justify-center gap-2 flex-wrap">
        <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
        </svg>
        <span>Thank you for helping reunite items with their owners</span>
      </p>
    </div>

  </div>
</div>

<script>
  // File upload handler
  const fileInput = document.getElementById('fileInput');
  if (fileInput) {
    fileInput.addEventListener('change', function(e) {
      if (e.target.files.length > 0) {
        const fileName = e.target.files[0].name;
        const uploadArea = document.querySelector('.file-upload-area');
        uploadArea.innerHTML = `
          <svg class="w-12 h-12 text-green-400 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <p class="text-white/80 font-medium">${fileName}</p>
          <p class="text-white/60 text-sm mt-1">Click to change</p>
        `;
      }
    });
  }

  // Set max date to today
  const dateInput = document.querySelector('input[type="date"]');
  if (dateInput) {
    const today = new Date().toISOString().split('T')[0];
    dateInput.setAttribute('max', today);
  }

</script>

{% endblock %}